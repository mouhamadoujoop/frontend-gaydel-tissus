{"version":3,"file":"src_app_components_current-sale_current-sale_component_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQuB;AAC8B;AACR;AACgC;AACE;AACf;AACM;AAGZ;AACW;AACL;AAMxC;AAEuC;AACR;AACA;AACM;AACF;AACJ;AAC2D;AAC1C;AAEwC;AACb;AACnC;AACP;AAEoB;AAE1B;AAGwC;AAChD;AACE;;;;;;;;;;;;;;;;;;;;;;;ICkB/BsC,6DAAA,aAIkB;IAChBA,qDAAA,GACF;IAAAA,2DAAA,EAAK;;;;IADHA,wDAAA,GACF;IADEA,iEAAA,MAAAM,UAAA,CAAAC,KAAA,MACF;;;;;IACAP,6DAAA,aAAiE;IAC/DA,qDAAA,GACF;IAAAA,2DAAA,EAAK;;;;;IAFqBA,yDAAA,YAAAM,UAAA,CAAAG,UAAA,CAA6B;IACrDT,wDAAA,GACF;IADEA,iEAAA,MAAAU,OAAA,CAAAJ,UAAA,CAAAK,QAAA,OACF;;;;;IAZFX,sEAAA,OAEmC;IACjCA,yDAAA,IAAAc,iEAAA,iBAMK;IACLd,yDAAA,IAAAe,iEAAA,iBAEK;IACPf,oEAAA,EAAe;;;;IAXbA,yDAAA,iBAAAM,UAAA,CAAAK,QAAA,CAAgC;;;;;IAHpCX,sEAAA,GAAuE;IACrEA,yDAAA,IAAAiB,4DAAA,2BAae;IACjBjB,oEAAA,EAAe;;;;IAbVA,wDAAA,GAA4B;IAA5BA,yDAAA,SAAAM,UAAA,CAAAY,IAAA,YAA4B;;;;;IAiB/BlB,wDAAA,aAA2D;;;;;IAC3DA,6DAAA,aAAmC;IAG7BA,yDAAA,mBAAAqB,uDAAAC,MAAA;MAAA,OAASA,MAAA,CAAAC,eAAA,EAAwB;IAAA,EAAC;IAGlCvB,wDAAA,mBAAyD;IAC3DA,2DAAA,EAAI;IAEJA,6DAAA,YAGkB;IAFhBA,yDAAA,mBAAAwB,uDAAAF,MAAA;MAAA,OAASA,MAAA,CAAAC,eAAA,EAAwB;IAAA,EAAC;IAGlCvB,wDAAA,mBAAwD;IAC1DA,2DAAA,EAAI;IAEJA,6DAAA,YAGkB;IAFhBA,yDAAA,mBAAAyB,uDAAAH,MAAA;MAAA,OAASA,MAAA,CAAAC,eAAA,EAAwB;IAAA,EAAC;IAGlCvB,wDAAA,mBAAuD;IACzDA,2DAAA,EAAI;;;;;IAORA,6DAAA,aAIkB;IAChBA,qDAAA,qBACF;IAAAA,2DAAA,EAAK;;;;;IACLA,6DAAA,aAAmC;IAE/BA,yDAAA,mBAAA0B,yDAAAJ,MAAA;MAAA,OAASA,MAAA,CAAAC,eAAA,EAAwB;IAAA,EAAC;IAElCvB,6DAAA,cACqG;IACnGA,wDAAA,mBAAuD;IACzDA,2DAAA,EAAM;;;;;IAOVA,wDAAA,aAA2D;;;;;;;;;;IAC3DA,6DAAA,aAA+D;IAE3DA,yDAAA,mBAAA2B,4DAAAL,MAAA;MAAA,OAASA,MAAA,CAAAC,eAAA,EAAwB;IAAA,EAAC;IAKlCvB,wDAAA,mBAA8C;IAChDA,2DAAA,EAAS;;;;;;IALPA,wDAAA,GAAuC;IAAvCA,yDAAA,uBAAAA,8DAAA,IAAA6B,GAAA,EAAAC,OAAA,EAAuC,sBAAAC,IAAA;;;;;IAS7C/B,wDAAA,aAA0D;;;;;IAC1DA,wDAAA,aAIe;;;IAFbA,yDAAA,cAAAgC,SAAA,CAAS;;;;;;IAcjBhC,6DAAA,iBAG8B;IAF5BA,yDAAA,mBAAAiC,gEAAAX,MAAA;MAAA,MAAAY,WAAA,GAAAlC,4DAAA,CAAAoC,IAAA;MAAA,MAAAC,UAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,MAAAC,OAAA,GAAAvC,4DAAA;MAAA,OAASA,0DAAA,CAAAuC,OAAA,CAAAG,sBAAA,CAAAL,UAAA,EAAAf,MAAA,CAAsC;IAAA,EAAC;IAGhDtB,6DAAA,uBAGkB;IAFhBA,yDAAA,mBAAA2C,sEAAArB,MAAA;MAAA,OAASA,MAAA,CAAAC,eAAA,EAAwB;IAAA,EAAC,2BAAAqB,8EAAAtB,MAAA;MAAA,MAAAY,WAAA,GAAAlC,4DAAA,CAAAoC,IAAA;MAAA,MAAAC,UAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,OACrBtC,0DAAA,CAAAqC,UAAA,CAAAQ,OAAA,GAAAvB,MAAA,CACf;IAAA,EAFoC;IAGlCtB,qDAAA,GACF;IAAAA,2DAAA,EAAe;;;;IAHbA,wDAAA,GAA4B;IAA5BA,yDAAA,YAAAqC,UAAA,CAAAQ,OAAA,CAA4B;IAE5B7C,wDAAA,GACF;IADEA,iEAAA,MAAAqC,UAAA,CAAA9B,KAAA,MACF;;;;;;IAMAP,6DAAA,iBAAmG;IAA/CA,yDAAA,mBAAA8C,8EAAA;MAAA9C,4DAAA,CAAA+C,IAAA;MAAA,MAAAC,WAAA,GAAAhD,4DAAA,GAAAiD,OAAA;MAAA,MAAAC,OAAA,GAAAlD,4DAAA;MAAA,OAASA,0DAAA,CAAAkD,OAAA,CAAAC,aAAA,CAAAH,WAAA,CAAsB;IAAA,EAAC;IAClFhD,wDAAA,mBAAwC;IACxCA,6DAAA,WAAM;IAAAA,qDAAA,eAAQ;IAAAA,2DAAA,EAAO;;;;;;IAEvBA,6DAAA,iBAAsG;IAAjDA,yDAAA,mBAAAoD,8EAAA;MAAApD,4DAAA,CAAAqD,IAAA;MAAA,MAAAL,WAAA,GAAAhD,4DAAA,GAAAiD,OAAA;MAAA,MAAAK,OAAA,GAAAtD,4DAAA;MAAA,OAASA,0DAAA,CAAAsD,OAAA,CAAAC,eAAA,CAAAP,WAAA,CAAwB;IAAA,EAAC;IACrFhD,wDAAA,mBAAyC;IACzCA,6DAAA,WAAM;IAAAA,qDAAA,cAAO;IAAAA,2DAAA,EAAO;;;;;IANtBA,yDAAA,IAAAwD,qDAAA,qBAGS;IACTxD,yDAAA,IAAAyD,qDAAA,qBAGS;;;;IAPAzD,yDAAA,SAAA0D,OAAA,CAAAC,SAAA,CAAAC,SAAA,gBAAwC;IAIxC5D,wDAAA,GAAyC;IAAzCA,yDAAA,SAAA0D,OAAA,CAAAC,SAAA,CAAAC,SAAA,iBAAyC;;;AD/HxD,MA8BaC,oBAAoB;EAgD/BC,YACUC,MAAc,EACdC,MAAiB,EACjBC,cAA8B,EAC9BC,QAAqB,EACrBC,YAAiC,EACjCC,iBAAoC,EACpCC,YAA0B,EAC1BC,cAA8B;IAP9B,KAAAP,MAAM,GAANA,MAAM;IACN,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,cAAc,GAAdA,cAAc;IACd,KAAAC,QAAQ,GAARA,QAAQ;IACR,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,iBAAiB,GAAjBA,iBAAiB;IACjB,KAAAC,YAAY,GAAZA,YAAY;IACZ,KAAAC,cAAc,GAAdA,cAAc;IAvDxB,KAAAC,UAAU,GAAG,IAAI9F,wDAAW,CAAC,OAAO,CAAC;IACrC,KAAA+F,QAAQ,GAA8B,IAAI5G,gDAAa,CAAa,CAAC,CAAC;IACtE,KAAA6G,KAAK,GAA2B,IAAI,CAACD,QAAQ,CAACE,YAAY,EAAE;IAwB5D,KAAAC,OAAO,GAA4B,EAAE;IACrC,KAAAC,QAAQ,GAAG,EAAE;IACb,KAAAC,eAAe,GAAa,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC;IAE3C,KAAAC,SAAS,GAAG,IAAIxG,qEAAc,CAAW,IAAI,EAAE,EAAE,CAAC;IAClD,KAAAyG,UAAU,GAAG,IAAInG,+DAAkB,EAAE;IAMpB,KAAAoG,UAAU,GAAerH,sDAAM,CAACD,sDAAU,CAAC;IAC5D,KAAAuH,IAAI,GAAQ,CAAC;IACb,KAAAC,MAAM,GAAQ,CAAC;IACf,KAAAC,QAAQ,GAAgB,EAAE;IAC1B,KAAAC,QAAQ,GAAO,EAAE,CAAC,CAAC;IAEnB,KAAAC,UAAU,GAAW,CAAC;EAanB;EAEH,IAAIC,cAAcA,CAAA;IAChB,OAAO,IAAI,CAACX,OAAO,CAChB9G,MAAM,CAAE0H,MAAM,IAAKA,MAAM,CAAC1C,OAAO,CAAC,CAClC/E,GAAG,CAAEyH,MAAM,IAAKA,MAAM,CAAC5E,QAAQ,CAAC;EACrC;EAEA6E,eAAeA,CAAA;IACb,OAAO,IAAI,CAACvB,cAAc,CAACuB,eAAe,CAAC,IAAI,CAACP,IAAI,EAAC,IAAI,CAACC,MAAM,CAAC,CAACO,IAAI,CAAC3H,oDAAG,CAAE4H,GAAO,IAAI;MACnF,IAAI,CAACP,QAAQ,GAAGO,GAAG,CAACC,IAAI;MACxB,OAAO,IAAI,CAACR,QAAQ,CAACrH,GAAG,CAAEmF,OAAO,IAAG,IAAIrD,6DAAQ,CAACqD,OAAO,CAAC,CAAC;IAG9D,CAAC,CAAC,CACD;EACH;EAEA2C,sBAAsBA,CAAA;IACpB,IAAI,CAACjB,OAAO,GAAG,CACb;MACEpE,KAAK,EAAE,gBAAgB;MACvBI,QAAQ,EAAE,aAAa;MACvBO,IAAI,EAAE,MAAM;MACZ2B,OAAO,EAAE,IAAI,CAACoC,IAAI,KAAK,CAAC,CAAC;KAC1B,EACD;MACE1E,KAAK,EAAE,uBAAuB;MAC9BI,QAAQ,EAAE,cAAc;MACxBO,IAAI,EAAE,MAAM;MACZ2B,OAAO,EAAE;KACV,EACD;MACEtC,KAAK,EAAE,SAAS;MAChBI,QAAQ,EAAE,SAAS;MACnBO,IAAI,EAAE,MAAM;MACZ2B,OAAO,EAAE;KACV,EACD;MAAEtC,KAAK,EAAE,SAAS;MAAEI,QAAQ,EAAE,SAAS;MAAEO,IAAI,EAAE,QAAQ;MAAE2B,OAAO,EAAE,IAAI,CAACoC,IAAI,KAAK;IAAC,CAAE,CACpF;EACH;EAEAY,QAAQA,CAAA;IACN,IAAI,CAAClC,SAAS,GAAG,IAAI5D,uDAAK,CAAC+F,IAAI,CAACC,KAAK,CAAC,IAAI,CAAC5B,YAAY,CAAC6B,OAAO,CAAC,UAAU,CAAC,IAAI,MAAM,CAAC,CAAC;IAEvF,IAAIC,OAAO,CAACC,KAAK,CAAChB,MAAM,EAAE;MACxB,IAAI,CAACD,IAAI,GAAC,CAAC;MACX,IAAI,CAACC,MAAM,GAACe,OAAO,CAACC,KAAK,CAAChB,MAAM;KAEjC,MAAI;MACH,MAAMiB,mBAAmB,GAAGtG,qGAAmB,CAACuG,WAAW,EAAE;MAC7D,MAAMC,QAAQ,GAAGF,mBAAmB,CAACH,OAAO,CAAC,UAAU,CAAC;MACxD,MAAMM,QAAQ,GAAGD,QAAQ,GAAG,IAAIvG,qDAAI,CAACgG,IAAI,CAACC,KAAK,CAACM,QAAQ,CAAC,CAAC,GAAG,IAAIvG,qDAAI,CAAC;QAAEyG,EAAE,EAAE,IAAI;QAAEC,UAAU,EAAE,SAAS;QAAEC,SAAS,EAAE;MAAM,CAAE,CAAC;MAC7H,IAAI,CAACvB,MAAM,GAACoB,QAAQ,CAACI,OAAO;;IAE9B,IAAI,CAAClB,eAAe,EAAE,CAACmB,SAAS,CAAExB,QAAQ,IAAI;MAC5C,IAAI,CAACX,QAAQ,CAACoC,IAAI,CAACzB,QAAQ,CAAC;MAE5B,IAAI,CAACE,UAAU,GAAG,IAAI,CAACF,QAAQ,CAAC0B,MAAM,CAAC,CAACC,KAAK,EAAE7D,OAAO,KAAK6D,KAAK,GAAG7D,OAAO,CAAC8D,YAAY,EAAE,CAAC,CAAC;IAC7F,CAAC,CAAC;IAEF,IAAI,CAACnB,sBAAsB,EAAE;IAC7B,IAAI,CAACoB,UAAU,GAAG,IAAIjJ,wEAAkB,EAAE;IAE1C,IAAI,CAAC0G,KAAK,CAACgB,IAAI,CAAC5H,uDAAM,CAAMoJ,OAAO,CAAC,CAAC,CAACN,SAAS,CAAExB,QAAQ,IAAI;MAC3D,IAAI,CAACA,QAAQ,GAAGA,QAAQ;MACxB,IAAI,CAAC6B,UAAU,CAACrB,IAAI,GAAGR,QAAQ;IACjC,CAAC,CAAC;IAEF,IAAI,CAACJ,UAAU,CAACmC,YAAY,CACzBzB,IAAI,CAAChG,+EAAkB,CAAC,IAAI,CAACuF,UAAU,CAAC,CAAC,CACzC2B,SAAS,CAAEQ,KAAK,IAAK,IAAI,CAACC,cAAc,CAACD,KAAK,CAAC,CAAC;EACrD;EAEAE,eAAeA,CAAA;IACb,IAAI,IAAI,CAACC,SAAS,EAAE;MAClB,IAAI,CAACN,UAAU,CAACM,SAAS,GAAG,IAAI,CAACA,SAAS;;IAG5C,IAAI,IAAI,CAACC,IAAI,EAAE;MACb,IAAI,CAACP,UAAU,CAACO,IAAI,GAAG,IAAI,CAACA,IAAI;;EAEpC;EAGAC,UAAUA,CAACC,IAAc;IACvBC,OAAO,CAACC,GAAG,CAACF,IAAI,CAAC;IAEjB;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IAEA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;EACF;;EAEAtE,aAAaA,CAACF,OAAgB;IAC5B,IAAI,CAACc,MAAM,CAAC6D,QAAQ,CAAC,CAAC,WAAW,CAAC,EAAE;MAAE1B,KAAK,EAAE;QAAE2B,SAAS,EAAE5E,OAAO,CAACsD;MAAE;IAAE,CAAE,CAAC;EAE3E;EAEAhD,eAAeA,CAACN,OAAgB;IAC9B,IAAI,CAACgB,cAAc,CAACV,eAAe,CAACN,OAAO,CAAC,CAAC0D,SAAS,CAAEmB,MAAU,IAAI;MACpE,IAAIA,MAAM,CAACnC,IAAI,EAAE;QACf,IAAI,CAACR,QAAQ,CAAC4C,MAAM,CAClB,IAAI,CAAC5C,QAAQ,CAAC6C,SAAS,CACpBC,eAAe,IAAKA,eAAe,CAAC1B,EAAE,KAAKtD,OAAO,CAACsD,EAAE,CACvD,EACD,CAAC,CACF;QACD,IAAI,CAACzB,SAAS,CAACoD,QAAQ,CAACjF,OAAO,CAAC;QAChC,IAAI,CAACuB,QAAQ,CAACoC,IAAI,CAAC,IAAI,CAACzB,QAAQ,CAAC;QACjC;QACA;;IAEJ,CAAC,CAAC;EAEJ;;EAEAgD,gBAAgBA,CAACN,SAAiB;IAChC,IAAI,CAACxD,YAAY,CAAC8D,gBAAgB,CAACN,SAAS,CAAC,CAAClB,SAAS,CAAEjB,GAAQ,IAAI;MACjE,IAAI,CAACtB,iBAAiB,CAACgE,QAAQ,CAAC1C,GAAG,CAACC,IAAI,CAAC;MACzC,IAAGD,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC0C,SAAS,EAAC;QACvB,IAAI,CAACC,SAAS,CAAC5C,GAAG,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC0C,SAAS,CAAC;;IAG3C,CAAC,CAAC;EACJ;EAGAC,SAASA,CAACC,QAAY;IACpB,IAAI,CAACjE,cAAc,CAACkE,aAAa,CAACD,QAAQ,CAAC,CAAC5B,SAAS,CAAEjB,GAAQ,IAAI;MACjE,IAAI,CAACtB,iBAAiB,CAACqE,UAAU,CAAC/C,GAAG,CAACC,IAAI,CAAC;IAE7C,CAAC,CAAC;EACJ;EAEAyB,cAAcA,CAACD,KAAa;IAC1B,IAAI,CAAC,IAAI,CAACH,UAAU,EAAE;MACpB;;IAEFG,KAAK,GAAGA,KAAK,CAACuB,IAAI,EAAE;IACpBvB,KAAK,GAAGA,KAAK,CAACwB,WAAW,EAAE;IAC3B,IAAI,CAAC3B,UAAU,CAACnJ,MAAM,GAAGsJ,KAAK;EAChC;EAEAzE,sBAAsBA,CAAC6C,MAA4B,EAAEqD,KAAY;IAC/DA,KAAK,CAACrH,eAAe,EAAE;IACvBqH,KAAK,CAACC,wBAAwB,EAAE;IAChCtD,MAAM,CAAC1C,OAAO,GAAG,CAAC0C,MAAM,CAAC1C,OAAO;EAClC;EAEA;EACAiG,aAAaA,CAAA;IACX,MAAMC,WAAW,GAAG,IAAI,CAACjE,SAAS,CAACkE,QAAQ,CAACC,MAAM;IAClD,MAAMC,OAAO,GAAG,IAAI,CAAClC,UAAU,CAACrB,IAAI,CAACsD,MAAM;IAC3C,OAAOF,WAAW,KAAKG,OAAO;EAChC;EAEA;EACAC,YAAYA,CAAA;IACV,IAAI,CAACL,aAAa,EAAE,GAChB,IAAI,CAAChE,SAAS,CAACsE,KAAK,EAAE,GACtB,IAAI,CAACpC,UAAU,CAACrB,IAAI,CAAC0D,OAAO,CAAEC,GAAG,IAAK,IAAI,CAACxE,SAAS,CAACyE,MAAM,CAACD,GAAG,CAAC,CAAC;EACvE;EAEAE,eAAeA,CAAIC,KAAa,EAAElE,MAAsB;IACtD,OAAOA,MAAM,CAAC5E,QAAQ;EACxB;EAEA+I,aAAaA,CAACC,MAAuB,EAAEL,GAAa;IAClD,MAAMG,KAAK,GAAG,IAAI,CAACtE,QAAQ,CAAC6C,SAAS,CAAE4B,CAAC,IAAKA,CAAC,KAAKN,GAAG,CAAC;IACvD,IAAI,CAAC9E,QAAQ,CAACoC,IAAI,CAAC,IAAI,CAACzB,QAAQ,CAAC;EACnC;EAAC,QAAA0E,CAAA;qBAvQUhG,oBAAoB,EAAA7D,gEAAA,CAAA+J,oDAAA,GAAA/J,gEAAA,CAAAiK,gEAAA,GAAAjK,gEAAA,CAAAmK,oFAAA,GAAAnK,gEAAA,CAAAqK,qEAAA,GAAArK,gEAAA,CAAAuK,qGAAA,GAAAvK,gEAAA,CAAAwK,wFAAA,GAAAxK,gEAAA,CAAA0K,8EAAA,GAAA1K,gEAAA,CAAA4K,oFAAA;EAAA;EAAA,QAAAE,EAAA;UAApBjH,oBAAoB;IAAAkH,SAAA;IAAAC,SAAA,WAAAC,2BAAAC,EAAA,EAAAC,GAAA;MAAA,IAAAD,EAAA;mEAmCpBjN,sEAAY;mEACZE,4DAAO;;;;;;;;;;;;;;;;;;QCvHpB6B,6DAAA,sBAAiB;QACbA,wDAAA,gCAEyB;QAEzBA,6DAAA,iCAGgB;QAMDA,qDAAA,GAAiC;QAAAA,2DAAA,EAAO;QAKjDA,6DAAA,wBAA0C;QACxCA,wDAAA,kBAAwD;QAM1DA,2DAAA,EAAiB;QAEjBA,wDAAA,eAA4B;QAE5BA,6DAAA,iBAKgB;QACdA,wDAAA,oBAA+C;QACjDA,2DAAA,EAAS;QAaXA,6DAAA,iBAKU;QAORA,yDAAA,KAAAoL,6CAAA,2BAee;QAGfpL,sEAAA,QAAqC;QACnCA,yDAAA,KAAAqL,mCAAA,iBAA2D;QAC3DrL,yDAAA,KAAAsL,mCAAA,iBAuBK;QACPtL,oEAAA,EAAe;QAGfA,sEAAA,QAAoC;QAClCA,yDAAA,KAAAuL,mCAAA,iBAMK;QACLvL,yDAAA,KAAAwL,mCAAA,iBASK;QACPxL,oEAAA,EAAe;QAGfA,sEAAA,QAAqC;QACnCA,yDAAA,KAAAyL,mCAAA,iBAA2D;QAC3DzL,yDAAA,KAAA0L,mCAAA,iBASK;QACP1L,oEAAA,EAAe;QAEfA,yDAAA,KAAA2L,mCAAA,iBAA0D;QAC1D3L,yDAAA,KAAA4L,mCAAA,iBAIe;QACjB5L,2DAAA,EAAQ;QAERA,wDAAA,yBAGwC;QAC1CA,2DAAA,EAAM;QAIVA,6DAAA,wBAA2E;QACzEA,yDAAA,KAAA6L,uCAAA,qBAUS;QACX7L,2DAAA,EAAW;QAEXA,6DAAA,wBAAsE;QACpEA,yDAAA,KAAA8L,4CAAA,0BASc;QAChB9L,2DAAA,EAAW;;;;QAnLPA,wDAAA,GAAgD;QAAhDA,0DAAA,cAAAmL,GAAA,CAAA5G,UAAA,CAAA4C,KAAA,aAAgD,SAAAgE,GAAA,CAAA5G,UAAA,CAAA4C,KAAA;QAQnCnH,wDAAA,GAAiC;QAAjCA,iEAAA,sBAAAmL,GAAA,CAAA9F,UAAA,OAAiC;QAStCrF,wDAAA,GAA0B;QAA1BA,yDAAA,gBAAAmL,GAAA,CAAApG,UAAA,CAA0B;QAQ5B/E,wDAAA,GAAsC;QAAtCA,yDAAA,sBAAAgM,GAAA,CAAsC;QAoBxChM,wDAAA,GAAQ;QAARA,yDAAA,aAAAgC,SAAA,CAAQ,eAAAmJ,GAAA,CAAAnE,UAAA;QAWyBhH,wDAAA,GAAY;QAAZA,yDAAA,YAAAmL,GAAA,CAAAxG,OAAA,CAAY,iBAAAwG,GAAA,CAAA3B,eAAA;QAkFxCxJ,wDAAA,IAA+B;QAA/BA,yDAAA,oBAAAmL,GAAA,CAAA7F,cAAA,CAA+B;QAEbtF,wDAAA,GAAuB;QAAvBA,yDAAA,qBAAAmL,GAAA,CAAA7F,cAAA,CAAuB;QAO9CtF,wDAAA,GAAmC;QAAnCA,yDAAA,oBAAAmL,GAAA,CAAAtG,eAAA,CAAmC,aAAAsG,GAAA,CAAAvG,QAAA;QAUpB5E,wDAAA,GAAU;QAAVA,yDAAA,YAAAmL,GAAA,CAAAxG,OAAA,CAAU;;;mBDvG/BnF,6GAAsB,EACtBD,0HAA4B,EAE5BD,mFAAqB,EACrBX,gEAAmB,EAAAsN,iEAAA,EAAAA,4DAAA,EAAAA,iEAAA,EACnB5M,4HAA6B,EAC7BD,kDAAI,EACJH,sEAAe,EAAAoN,oEAAA,EAAAA,oEAAA,EACfrN,wEAAgB,EAAAwN,kEAAA,EAChBzN,kEAAa,EAAA2N,4DAAA,EACb5N,kEAAa,EAAA8N,4DAAA,EAAAA,gEAAA,EAAAA,mEAAA,EAAAA,mEAAA,EACb5O,oEAAc,EAAAiP,8DAAA,EAAAA,sEAAA,EAAAA,qEAAA,EAAAA,kEAAA,EAAAA,gEAAA,EAAAA,+DAAA,EAAAA,mEAAA,EAAAA,6DAAA,EAAAA,kEAAA,EAAAA,4DAAA,EACd7O,kEAAa,EAAAwP,4DAAA,EAAAA,kEAAA,EACb/O,0EAAiB,EAAAiP,oEAAA,EACjB3O,mDAAK,EACLD,qDAAO,EACPhB,4EAAkB,EAAA8P,sEAAA,EAClBtP,wDAAW,EAAAuN,oDAAA,EACX5N,sEAAe,EACfqB,oEAAc,EAAAwO,8DAAA,EAAAE,uEAAA,EAAAA,oEAAA,EACdzO,2EAAiB;IAAA4O,MAAA;IAAA5I,IAAA;MAAA6I,SAAA,EAtBP,CAACjQ,+EAAa,EAAEC,0EAAW;IAAC;EAAA;;;;;;;;;;;;;;;;AExDpC,MAAOoB,QAAQ;EAcnBkE,YAAYb,OAAY;IAHxB,KAAAwL,OAAO,GAAW,EAAE;IAIlB,MAAMC,KAAK,GAAG,IAAIC,IAAI,CAACA,IAAI,CAACC,GAAG,EAAE,CAAC;IAClC,IAAI,CAACrI,EAAE,GAAGtD,OAAO,CAACsD,EAAE;IACpB,IAAI,CAACsI,OAAO,GAAG5L,OAAO,CAAC4L,OAAO;IAC9B,IAAI5L,OAAO,CAAC6L,KAAK,EAAE;MACjB,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9L,OAAO,CAAC6L,KAAK,CAAC7F,MAAM,EAAE8F,CAAC,EAAE,EAAE;QAC7C,MAAMC,OAAO,GAAG/L,OAAO,CAAC6L,KAAK,CAACC,CAAC,CAAC;QAChC,IAAI,CAACN,OAAO,IAAIO,OAAO,CAACC,aAAa,GAAC,GAAG,GAACD,OAAO,CAACE,OAAO,CAACC,IAAI,GAAG,GAAG,GAAGH,OAAO,CAACC,aAAa,GAACD,OAAO,CAACI,EAAE,GAAC,GAAG;QAE3G;QACA,IAAIL,CAAC,GAAG9L,OAAO,CAAC6L,KAAK,CAAC7F,MAAM,GAAG,CAAC,EAAE;UAChC,IAAI,CAACwF,OAAO,IAAI,KAAK;;;;IAK3B,IAAI,CAACxJ,IAAI,GAAGhC,OAAO,CAACgC,IAAI;IACxB,IAAI,CAACoK,YAAY,GAAGpM,OAAO,CAACoM,YAAY,GAAGpM,OAAO,CAACoM,YAAY,GAAGX,KAAK,CAACY,WAAW,EAAE,CAACC,SAAS,CAAC,CAAC,EAAC,EAAE,CAAC;IACrG,IAAI,CAACxI,YAAY,GAAG9D,OAAO,CAAC8D,YAAY;IACxC,IAAI,CAACyI,IAAI,GAAIvM,OAAO,CAACuM,IAAI,IAAIvM,OAAO,CAACuM,IAAI,CAAChJ,UAAU,GAAIvD,OAAO,CAACuM,IAAI,CAAChJ,UAAU,GAAKvD,OAAO,CAACuM,IAAI,GAAGvM,OAAO,CAACuM,IAAI,GAAE,EAAE;IACnH,IAAIvM,OAAO,CAACwM,WAAW,EAAE;MACvB,IAAI,CAACA,WAAW,GAAGxM,OAAO,CAACwM,WAAW;;IAExC,IAAIxM,OAAO,CAACoF,SAAS,EAAE;MACrB,IAAI,CAACA,SAAS,GAAGpF,OAAO,CAACoF,SAAS;;IAEpC,IAAIpF,OAAO,CAACyM,MAAM,EAAE;MAClB,IAAI,CAACA,MAAM,GAAGzM,OAAO,CAACyM,MAAM;;IAE9B,IAAI,CAACzK,IAAI,GAAGhC,OAAO,CAACgC,IAAI;IACxB,IAAI,CAAC0K,cAAc,GAAG,IAAI,CAACC,UAAU,CAAC,IAAIjB,IAAI,CAAC,IAAI,CAACU,YAAY,CAAC,CAAC;EAGpE;EACQO,UAAUA,CAACC,IAAU;IAC3B,MAAMC,GAAG,GAAGD,IAAI,CAACE,OAAO,EAAE,CAACC,QAAQ,EAAE,CAACC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC;IACtD,MAAMC,UAAU,GAAG,CACjB,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE,OAAO,EAAE,KAAK,EAAE,MAAM,EACpD,SAAS,EAAE,MAAM,EAAE,WAAW,EAAE,SAAS,EAAE,UAAU,EAAE,UAAU,CAClE;IACD,MAAMC,KAAK,GAAGD,UAAU,CAACL,IAAI,CAACO,QAAQ,EAAE,CAAC;IACzC,MAAMC,IAAI,GAAGR,IAAI,CAACS,WAAW,EAAE,CAACN,QAAQ,EAAE;IAC1C,OAAO,GAAGF,GAAG,IAAIK,KAAK,IAAIE,IAAI,EAAE;EAClC;;;;;;;;;;;;;;;;;;;;ACzD2D;;;;;AAO7D,MAGaxF,cAAc;EAEzB;EAEA/G,YACU0M,UAAsB,EACtBzM,MAAc,EACdI,YAAiC;IAFjC,KAAAqM,UAAU,GAAVA,UAAU;IACV,KAAAzM,MAAM,GAANA,MAAM;IACN,KAAAI,YAAY,GAAZA,YAAY;IANtB,KAAAsM,QAAQ,GAAGF,kEAAW,CAACE,QAAQ;EAO7B;EAIFC,gBAAgBA,CAAChK,OAAe;IAC9B,OAAO,IAAI,CAAC8J,UAAU,CAACG,GAAG,CAAC,GAAG,IAAI,CAACF,QAAQ,iBAAiB/J,OAAO,EAAE,EAAE;MAAC,GAAI,IAAI,CAACvC,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAEpH;EAEApI,aAAaA,CAACH,SAAiB;IAC7B,OAAO,IAAI,CAACmI,UAAU,CAACG,GAAG,CAAC,GAAG,IAAI,CAACF,QAAQ,YAAYpI,SAAS,EAAE,EAAE;MAAC,GAAI,IAAI,CAAClE,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAEjH;EAEAC,gBAAgBA,CAACxI,SAAiB;IAChC,OAAO,IAAI,CAACmI,UAAU,CAACG,GAAG,CAAC,GAAG,IAAI,CAACF,QAAQ,YAAYpI,SAAS,UAAU,EAAE;MAAC,GAAI,IAAI,CAAClE,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAEzH;EACA;EACA;EACA;EACA;EAEAE,UAAUA,CAACpB,MAAa;IACtB,OAAO,IAAI,CAACc,UAAU,CAACO,IAAI,CAAC,GAAG,IAAI,CAACN,QAAQ,UAAU,EAAEf,MAAM,EAAC;MAAC,GAAI,IAAI,CAACvL,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAE5G;EACAI,YAAYA,CAACtB,MAAa;IACxB,OAAO,IAAI,CAACc,UAAU,CAACS,GAAG,CAAC,GAAG,IAAI,CAACR,QAAQ,WAAW,GAACf,MAAM,CAACnJ,EAAE,EAAEmJ,MAAM,EAAC;MAAC,GAAI,IAAI,CAACvL,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAEtH;EAAC,QAAA/G,CAAA;qBAtCUgB,cAAc,EAAA7K,sDAAA,CAAA+J,4DAAA,GAAA/J,sDAAA,CAAAiK,mDAAA,GAAAjK,sDAAA,CAAAmK,qFAAA;EAAA;EAAA,QAAAW,EAAA;WAAdD,cAAc;IAAAuG,OAAA,EAAdvG,cAAc,CAAAwG,IAAA;IAAAC,UAAA,EAFb;EAAM;;;;;;;;;;;;;;;;;;;;;ACN2C;;;;;AAO/D,MAGa3G,YAAY;EAEvB;EAEA7G,YACU0M,UAAsB,EACtBzM,MAAc,EACdI,YAAiC;IAFjC,KAAAqM,UAAU,GAAVA,UAAU;IACV,KAAAzM,MAAM,GAANA,MAAM;IACN,KAAAI,YAAY,GAAZA,YAAY;IANtB,KAAAsM,QAAQ,GAAGF,yEAAW,CAACE,QAAQ;EAO7B;EAEFc,YAAYA,CAACC,MAAc;IACzB,OAAO,IAAI,CAAChB,UAAU,CAACG,GAAG,CAAC,GAAG,IAAI,CAACF,QAAQ,UAAUe,MAAM,QAAQ,EAAE;MAAC,GAAI,IAAI,CAACrN,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAClH;EAEAzI,gBAAgBA,CAACsJ,SAAiB;IAChC,OAAO,IAAI,CAACjB,UAAU,CAACG,GAAG,CAAC,GAAG,IAAI,CAACF,QAAQ,aAAagB,SAAS,OAAO,EAAE;MAAC,GAAI,IAAI,CAACtN,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EACvH;EAEAc,QAAQA,CAACjK,IAAS;IAChB,OAAO,IAAI,CAAC+I,UAAU,CAACO,IAAI,CAAC,GAAG,IAAI,CAACN,QAAQ,QAAQ,EAAEhJ,IAAI,EAAC;MAAC,GAAI,IAAI,CAACtD,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAExG;EACAe,UAAUA,CAAClK,IAAS;IAClB,OAAO,IAAI,CAAC+I,UAAU,CAACS,GAAG,CAAC,GAAG,IAAI,CAACR,QAAQ,SAAS,GAAChJ,IAAI,CAAClB,EAAE,EAAEkB,IAAI,EAAC;MAAC,GAAI,IAAI,CAACtD,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAEhH;EACApJ,UAAUA,CAACC,IAAS;IAClB,OAAO,IAAI,CAAC+I,UAAU,CAACoB,MAAM,CAAC,GAAG,IAAI,CAACnB,QAAQ,SAAS,GAAChJ,IAAI,CAAClB,EAAE,EAAE;MAAC,GAAI,IAAI,CAACpC,YAAY,CAACyM,gBAAgB;IAAE,CAAC,CAAC;EAE9G;EAAC,QAAA/G,CAAA;qBA7BUc,YAAY,EAAA3K,sDAAA,CAAA+J,4DAAA,GAAA/J,sDAAA,CAAAiK,mDAAA,GAAAjK,sDAAA,CAAAmK,qFAAA;EAAA;EAAA,QAAAW,EAAA;WAAZH,YAAY;IAAAyG,OAAA,EAAZzG,YAAY,CAAA0G,IAAA;IAAAC,UAAA,EAFX;EAAM","sources":["./src/app/components/current-sale/current-sale.component.ts","./src/app/components/current-sale/current-sale.component.html","./src/app/models/invoices.ts","./src/app/services/client/clients.service.ts","./src/app/services/sale/sales.service.ts"],"sourcesContent":["import {\n  AfterViewInit,\n  Component,\n  DestroyRef,\n  inject,\n  Input,\n  OnInit,\n  ViewChild\n} from '@angular/core';\nimport { Observable, of, ReplaySubject } from 'rxjs';\nimport { filter, map } from 'rxjs/operators';\nimport { MatTableDataSource, MatTableModule } from '@angular/material/table';\nimport { MatPaginator, MatPaginatorModule } from '@angular/material/paginator';\nimport { MatSort, MatSortModule } from '@angular/material/sort';\nimport { MatDialog, MatDialogModule } from '@angular/material/dialog';\nimport { TableColumn } from '@vex/interfaces/table-column.interface';\n\nimport { SelectionModel } from '@angular/cdk/collections';\nimport { fadeInUp400ms } from '@vex/animations/fade-in-up.animation';\nimport { stagger40ms } from '@vex/animations/stagger.animation';\nimport {\n  FormControl,\n  FormsModule,\n  ReactiveFormsModule,\n  UntypedFormControl\n} from '@angular/forms';\nimport { MatSelectChange } from '@angular/material/select';\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatMenuModule } from '@angular/material/menu';\nimport { MatIconModule } from '@angular/material/icon';\nimport { MatTooltipModule } from '@angular/material/tooltip';\nimport { MatButtonModule } from '@angular/material/button';\nimport { NgClass, NgFor, NgIf } from '@angular/common';\nimport { VexPageLayoutContentDirective } from '@vex/components/vex-page-layout/vex-page-layout-content.directive';\nimport { MatButtonToggleModule } from '@angular/material/button-toggle';\nimport { VexBreadcrumbsComponent } from '@vex/components/vex-breadcrumbs/vex-breadcrumbs.component';\nimport { VexPageLayoutHeaderDirective } from '@vex/components/vex-page-layout/vex-page-layout-header.directive';\nimport { VexPageLayoutComponent } from '@vex/components/vex-page-layout/vex-page-layout.component';\nimport { takeUntilDestroyed } from '@angular/core/rxjs-interop';\nimport { MatInputModule } from '@angular/material/input';\n\nimport { MatSnackBar, MatSnackBarModule } from '@angular/material/snack-bar';\nimport { Product } from '../../models/products';\nimport { Invoices } from 'src/app/models/invoices';\nimport { InvoiceService } from 'src/app/services/invoice/invoice.service';\nimport { Router } from '@angular/router';\nimport { LocalStorageService } from 'src/app/services/local-storage/local-storage.service';\nimport { User } from 'src/app/models/user';\nimport { Roles } from 'src/app/models/roles';\nimport { PdfServiceService } from 'src/app/services/pdf/pdf-service.service';\nimport { ClientsService } from 'src/app/services/client/clients.service';\nimport { SalesService } from 'src/app/services/sale/sales.service';\n\n@Component({\n  selector: 'vex-current-sale',\n  templateUrl: './current-sale.component.html',\n  styleUrls: ['./current-sale.component.scss'],\n  standalone : true,\n  animations: [fadeInUp400ms, stagger40ms],\n  imports: [\n    VexPageLayoutComponent,\n    VexPageLayoutHeaderDirective,\n    VexBreadcrumbsComponent,\n    MatButtonToggleModule,\n    ReactiveFormsModule,\n    VexPageLayoutContentDirective,\n    NgIf,\n    MatButtonModule,\n    MatTooltipModule,\n    MatIconModule,\n    MatMenuModule,\n    MatTableModule,\n    MatSortModule,\n    MatCheckboxModule,\n    NgFor,\n    NgClass,\n    MatPaginatorModule,\n    FormsModule,\n    MatDialogModule,\n    MatInputModule,\n    MatSnackBarModule\n  ]\n})\nexport class CurrentSaleComponent implements OnInit, AfterViewInit {\n  layoutCtrl = new FormControl('boxed');\n  subject$: ReplaySubject<Invoices[]> = new ReplaySubject<Invoices[]>(1);\n  data$: Observable<Invoices[]> = this.subject$.asObservable();\n  @Input()\n  // columns: TableColumn<Invoices>[] = [\n  //   {\n  //     label: 'Numéro Facture',\n  //     property: 'num_invoice',\n  //     type: 'text',\n  //     visible: this.step === 1 // Visibility condition\n  //   },\n  //   {\n  //     label: 'Montant Facture',\n  //     property: 'total_amount',\n  //     type: 'text',\n  //     visible: true\n  //   },\n  //   {\n  //     label: 'Détails',\n  //     property: 'details',\n  //     type: 'text',\n  //     visible: true\n  //   },\n  //   { label: 'Actions', property: 'actions', type: 'button', visible: true }\n  // ];\n\n  columns: TableColumn<Invoices>[] = [];\n  pageSize = 10;\n  pageSizeOptions: number[] = [5, 10, 20, 50];\n  dataSource!: MatTableDataSource<Invoices>;\n  selection = new SelectionModel<Invoices>(true, []);\n  searchCtrl = new UntypedFormControl();\n\n\n  @ViewChild(MatPaginator, { static: true }) paginator?: MatPaginator;\n  @ViewChild(MatSort, { static: true }) sort?: MatSort;\n\n  private readonly destroyRef: DestroyRef = inject(DestroyRef);\n  step:number=0;\n  siteId:number=0;\n  invoices: Invoices [] = [];\n  dataRole:any = []; // pour recuperer le localStorage\n  userRoles!: Roles;\n  totalVente: number = 0;\n\n\n\n  constructor(\n    private router: Router,\n    private dialog: MatDialog,\n    private invoiceService: InvoiceService,\n    private snackbar: MatSnackBar,\n    private localStorage: LocalStorageService,\n    private pdfServiceService: PdfServiceService,\n    private salesService: SalesService,\n    private clientsService: ClientsService,\n  ) {}\n\n  get visibleColumns() {\n    return this.columns\n      .filter((column) => column.visible)\n      .map((column) => column.property);\n  }\n\n  getInvoicByStep(){\n    return this.invoiceService.getInvoicByStep(this.step,this.siteId).pipe(map((res:any) => {\n        this.invoices = res.data;\n        return this.invoices.map((invoice)=>new Invoices(invoice));\n        \n\n    })\n    );\n  }\n\n  updateColumnVisibility(){\n    this.columns = [\n      {\n        label: 'Numéro Facture',\n        property: 'num_invoice',\n        type: 'text',\n        visible: this.step === 1 // Visibility condition\n      },\n      {\n        label: 'Montant Facture(FCFA)',\n        property: 'total_amount',\n        type: 'text',\n        visible: true\n      },\n      {\n        label: 'Détails',\n        property: 'details',\n        type: 'text',\n        visible: true\n      },\n      { label: 'Actions', property: 'actions', type: 'button', visible: this.step === 0 }\n    ];\n  }\n\n  ngOnInit() {\n    this.userRoles = new Roles(JSON.parse(this.localStorage.getData('dataRole') ?? 'null'));\n    \n    if (history.state.siteId) {\n      this.step=1;\n      this.siteId=history.state.siteId;\n      \n    }else{\n      const localStorageService = LocalStorageService.getInstance();\n      const userData = localStorageService.getData('dataUser');\n      const userInfo = userData ? new User(JSON.parse(userData)) : new User({ id: null, first_name: 'Unknown', last_name: 'User' });\n      this.siteId=userInfo.site_id;\n    }\n    this.getInvoicByStep().subscribe((invoices) => {\n      this.subject$.next(invoices);\n      \n      this.totalVente = this.invoices.reduce((total, invoice) => total + invoice.total_amount, 0);\n    });\n    \n    this.updateColumnVisibility();\n    this.dataSource = new MatTableDataSource();\n\n    this.data$.pipe(filter<any>(Boolean)).subscribe((invoices) => {\n      this.invoices = invoices;\n      this.dataSource.data = invoices;\n    });\n\n    this.searchCtrl.valueChanges\n      .pipe(takeUntilDestroyed(this.destroyRef))\n      .subscribe((value) => this.onFilterChange(value));\n  }\n\n  ngAfterViewInit() {\n    if (this.paginator) {\n      this.dataSource.paginator = this.paginator;\n    }\n\n    if (this.sort) {\n      this.dataSource.sort = this.sort;\n    }\n  }\n  \n \n  deleteSale(sale: Invoices) {\n    console.log(sale);\n    \n    // this.invoiceService.deleteSale(sale).subscribe((result:any) => {\n    //   if (result.status === 200 ) {\n    //     this.invoices.splice(\n    //       this.invoices.findIndex(\n    //         (existingSale) => existingSale.id === sale.id\n    //       ),\n    //       1\n    //     );\n    //     this.selection.deselect(sale);\n    //     this.subject$.next(this.invoices);\n    //     this.snackbar.open(\n\n    //       \"Vente Supprimer avec succés\",\n\n    //       'MERCI',\n    //       {\n    //         duration: 1000\n    //       }\n    //     );\n    //   }else{\n    //     this.snackbar.open(\n    //       \"Echec Suppression Vente\",\n    //       'MERCI DE REESSAYER',\n    //       {\n    //         duration: 1000\n    //       }\n    //     );\n\n    //   }\n    // });\n    //\n    // this.invoices.splice(\n    //   this.invoices.findIndex(\n    //     (existingSale) => existingSale.id === sale.id\n    //   ),\n    //   1\n    // );\n    // this.selection.deselect(sale);\n    // this.subject$.next(this.invoices);\n  }\n\n  updateInvoice(invoice:Invoices){\n    this.router.navigate(['/new-sale'], { state: { invoiceId: invoice.id } });\n\n  }\n\n  validateInvoice(invoice:Invoices){\n    this.invoiceService.validateInvoice(invoice).subscribe((result:any) => {\n      if (result.data) {\n        this.invoices.splice(\n          this.invoices.findIndex(\n            (existingInvoice) => existingInvoice.id === invoice.id\n          ),\n          1\n        );\n        this.selection.deselect(invoice);\n        this.subject$.next(this.invoices);\n        // this.getSaleByInvoice(invoice.id);\n        // this.router.navigate(['/pdf'], { state: { numInvoice: invoice.num_invoice} });\n      }\n    });\n\n  }\n\n  getSaleByInvoice(invoiceId: number){\n    this.salesService.getSaleByInvoice(invoiceId).subscribe((res: any) => {\n        this.pdfServiceService.saveData(res.data);\n        if(res.data[0].client_id){\n          this.getClient(res.data[0].client_id);\n        } \n\n    });\n  }\n  \n  \n  getClient(clientId:any){\n    this.clientsService.getClientById(clientId).subscribe((res: any) => {\n      this.pdfServiceService.saveClient(res.data); \n\n    });\n  }\n\n  onFilterChange(value: string) {\n    if (!this.dataSource) {\n      return;\n    }\n    value = value.trim();\n    value = value.toLowerCase();\n    this.dataSource.filter = value;\n  }\n\n  toggleColumnVisibility(column: TableColumn<Product>, event: Event) {\n    event.stopPropagation();\n    event.stopImmediatePropagation();\n    column.visible = !column.visible;\n  }\n\n  /** Whether the number of selected elements matches the total number of rows. */\n  isAllSelected() {\n    const numSelected = this.selection.selected.length;\n    const numRows = this.dataSource.data.length;\n    return numSelected === numRows;\n  }\n\n  /** Selects all rows if they are not all selected; otherwise clear selection. */\n  masterToggle() {\n    this.isAllSelected()\n      ? this.selection.clear()\n      : this.dataSource.data.forEach((row) => this.selection.select(row));\n  }\n\n  trackByProperty<T>(index: number, column: TableColumn<T>) {\n    return column.property;\n  }\n\n  onLabelChange(change: MatSelectChange, row: Invoices) {\n    const index = this.invoices.findIndex((s) => s === row);\n    this.subject$.next(this.invoices);\n  }\n\n}\n\n\n","<vex-page-layout>\n    <vex-page-layout-header\n      class=\"pb-1 flex flex-col items-start justify-center\">\n    </vex-page-layout-header>\n  \n    <vex-page-layout-content\n      [class.container]=\"layoutCtrl.value === 'boxed'\"\n      [class.px-6]=\"layoutCtrl.value === 'fullwidth'\"\n      class=\"-mt-6\">\n      <div class=\"card overflow-auto -mt-16\">\n        <div\n          class=\"bg-app-bar px-6 h-16 border-b sticky left-0 flex items-center\">\n          <h2\n            class=\"title my-0 ltr:pr-4 rtl:pl-4 ltr:mr-4 rtl:ml-4 ltr:border-r rtl:border-l hidden sm:block flex-none\">\n            <span >Ventes en cours: {{totalVente}} F</span>\n            \n          </h2>\n  \n  \n          <mat-form-field subscriptSizing=\"dynamic\">\n            <mat-icon matIconPrefix svgIcon=\"mat:search\"></mat-icon>\n            <input\n              matInput\n              [formControl]=\"searchCtrl\"\n              placeholder=\"Search&hellip;\"\n              type=\"text\" />\n          </mat-form-field>\n  \n          <span class=\"flex-1\"></span>\n  \n          <button\n            [matMenuTriggerFor]=\"columnFilterMenu\"\n            class=\"ml-4 flex-none\"\n            mat-icon-button\n            matTooltip=\"Filter Columns\"\n            type=\"button\">\n            <mat-icon svgIcon=\"mat:filter_list\"></mat-icon>\n          </button>\n  \n          <!-- <button\n            (click)=\"createDepense()\"\n            class=\"ml-4 flex-none\"\n            color=\"primary\"\n            mat-mini-fab\n            matTooltip=\"Ajout Depense\"\n            type=\"button\">\n            <mat-icon svgIcon=\"mat:add\"></mat-icon>\n          </button> -->\n        </div>\n  \n        <table\n          @stagger\n          [dataSource]=\"dataSource\"\n          class=\"w-full\"\n          mat-table\n          matSort>\n          <!--- Note that these columns can be defined in any order.\n                The actual rendered columns are set as a property on the row definition\" -->\n  \n            \n  \n          <!-- Text Columns -->\n          <ng-container *ngFor=\"let column of columns; trackBy: trackByProperty\">\n            <ng-container\n              *ngIf=\"column.type === 'text'\"\n              [matColumnDef]=\"column.property\">\n              <th\n                *matHeaderCellDef\n                class=\"uppercase\"\n                mat-header-cell\n                mat-sort-header>\n                {{ column.label }}\n              </th>\n              <td *matCellDef=\"let row\" [ngClass]=\"column.cssClasses\" mat-cell>\n                {{ row[column.property] }}\n              </td>\n            </ng-container>\n          </ng-container>\n  \n          <!-- Conversion (kg-m)-->\n          <ng-container matColumnDef=\"contact\">\n            <th *matHeaderCellDef mat-header-cell mat-sort-header></th>\n            <td *matCellDef=\"let row\" mat-cell>\n              <div class=\"flex\">\n                <a\n                  (click)=\"$event.stopPropagation()\"\n                  class=\"w-8 h-8 p-0 leading-none flex items-center justify-center hover:bg-hover text-primary-600 bg-primary-600/10\"\n                  mat-icon-button>\n                  <mat-icon class=\"icon-sm\" svgIcon=\"mat:phone\"></mat-icon>\n                </a>\n  \n                <a\n                  (click)=\"$event.stopPropagation()\"\n                  class=\"w-8 h-8 p-0 leading-none flex items-center justify-center ml-1 hover:bg-hover text-teal-600 bg-teal/10\"\n                  mat-icon-button>\n                  <mat-icon class=\"icon-sm\" svgIcon=\"mat:mail\"></mat-icon>\n                </a>\n  \n                <a\n                  (click)=\"$event.stopPropagation()\"\n                  class=\"w-8 h-8 p-0 leading-none flex items-center justify-center ml-1 hover:bg-hover text-green-600 bg-green-600/10\"\n                  mat-icon-button>\n                  <mat-icon class=\"icon-sm\" svgIcon=\"mat:map\"></mat-icon>\n                </a>\n              </div>\n            </td>\n          </ng-container>\n  \n          <!-- Label Column -->\n          <ng-container matColumnDef=\"labels\">\n            <th\n              *matHeaderCellDef\n              class=\"uppercase\"\n              mat-header-cell\n              mat-sort-header>\n              Qualité\n            </th>\n            <td *matCellDef=\"let row\" mat-cell>\n              <div\n                (click)=\"$event.stopPropagation()\"\n                class=\"flex items-center gap-1\">\n                <div\n                  class=\"bg-base text-hint cursor-pointer hover:bg-hover flex-none flex items-center justify-center\">\n                  <mat-icon class=\"icon-sm\" svgIcon=\"mat:add\"></mat-icon>\n                </div>\n              </div>\n            </td>\n          </ng-container>\n  \n          <!-- Action Column -->\n          <ng-container matColumnDef=\"actions\">\n            <th *matHeaderCellDef mat-header-cell mat-sort-header></th>\n            <td *matCellDef=\"let row\" class=\"w-10 text-secondary\" mat-cell>\n              <button\n                (click)=\"$event.stopPropagation()\"\n                [matMenuTriggerData]=\"{ invoice: row }\"\n                [matMenuTriggerFor]=\"actionsMenu\"\n                mat-icon-button\n                type=\"button\">\n                <mat-icon svgIcon=\"mat:more_horiz\"></mat-icon>\n              </button>\n            </td>\n          </ng-container>\n  \n          <tr *matHeaderRowDef=\"visibleColumns\" mat-header-row></tr>\n          <tr\n            *matRowDef=\"let row; columns: visibleColumns\"\n            @fadeInUp\n            class=\"hover:bg-hover transition duration-400 ease-out-swift cursor-pointer\"\n            mat-row></tr>\n        </table>\n  \n        <mat-paginator\n          [pageSizeOptions]=\"pageSizeOptions\"\n          [pageSize]=\"pageSize\"\n          class=\"sticky left-0\"></mat-paginator>\n      </div>\n    </vex-page-layout-content>\n  </vex-page-layout>\n  \n  <mat-menu #columnFilterMenu=\"matMenu\" xPosition=\"before\" yPosition=\"below\">\n    <button\n      (click)=\"toggleColumnVisibility(column, $event)\"\n      *ngFor=\"let column of columns\"\n      class=\"mat-menu-item block\">\n      <mat-checkbox\n        (click)=\"$event.stopPropagation()\"\n        [(ngModel)]=\"column.visible\"\n        color=\"primary\">\n        {{ column.label }}\n      </mat-checkbox>\n    </button>\n  </mat-menu>\n  \n  <mat-menu #actionsMenu=\"matMenu\" xPosition=\"before\" yPosition=\"below\">\n    <ng-template let-invoice=\"invoice\" matMenuContent>\n      <button *ngIf=\"userRoles.role_name != 'CAISSIERE' \" (click)=\"updateInvoice(invoice)\" mat-menu-item>\n        <mat-icon svgIcon=\"mat:edit\"></mat-icon>\n        <span>Modifier</span>\n      </button>\n      <button *ngIf=\"userRoles.role_name === 'CAISSIERE' \" (click)=\"validateInvoice(invoice)\" mat-menu-item>\n        <mat-icon svgIcon=\"mat:check\"></mat-icon>\n        <span>Valider</span>\n      </button>\n    </ng-template>\n  </mat-menu>\n  ","import { Sale } from \"./sales\";\r\n\r\nexport class Invoices {\r\n\r\n  id: number;\r\n  num_invoice!: number;\r\n  step: number;\r\n  client_id!: number;\r\n  client!: number;\r\n  total_amount:number;\r\n  invoice_date: string;\r\n  user_id: number;\r\n  user: string;\r\n  details: string = '';\r\n  displayed_Date: string;\r\n\r\n  constructor(invoice: any) {\r\n    const today = new Date(Date.now());\r\n    this.id = invoice.id;\r\n    this.user_id = invoice.user_id;\r\n    if (invoice.sales) {\r\n      for (let i = 0; i < invoice.sales.length; i++) {\r\n        const element = invoice.sales[i];\r\n        this.details += element.quantity_sold+\" \"+element.product.name + \" \" + element.quantity_sold*element.pU+\"F\";\r\n        \r\n        // Ajouter un point-virgule seulement s'il y a un autre élément après\r\n        if (i < invoice.sales.length - 1) {\r\n          this.details += \" ; \";\r\n        }\r\n      }\r\n      \r\n    }\r\n    this.step = invoice.step;\r\n    this.invoice_date = invoice.invoice_date ? invoice.invoice_date : today.toISOString().substring(0,10);\r\n    this.total_amount = invoice.total_amount;\r\n    this.user = (invoice.user && invoice.user.first_name) ? invoice.user.first_name  : (invoice.user)? invoice.user: '';\r\n    if (invoice.num_invoice) {\r\n      this.num_invoice = invoice.num_invoice;\r\n    }\r\n    if (invoice.client_id) {\r\n      this.client_id = invoice.client_id;\r\n    }\r\n    if (invoice.client) {\r\n      this.client = invoice.client;\r\n    }\r\n    this.step = invoice.step;\r\n    this.displayed_Date = this.formatDate(new Date(this.invoice_date));\r\n\r\n\r\n  }\r\n  private formatDate(date: Date): string {\r\n    const day = date.getDate().toString().padStart(2, '0');\r\n    const monthNames = [\r\n      'Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin',\r\n      'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'\r\n    ];\r\n    const month = monthNames[date.getMonth()];\r\n    const year = date.getFullYear().toString();\r\n    return `${day} ${month} ${year}`;\r\n  }\r\n\r\n\r\n\r\n}\r\n","\r\nimport { Injectable } from '@angular/core';\r\nimport { environment } from '../../environments/environment';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Observable } from 'rxjs';\r\nimport { LocalStorageService } from '../local-storage/local-storage.service';\r\nimport { Router } from '@angular/router';\r\nimport { Client } from 'src/app/models/clients';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ClientsService {\r\n  BASE_URL = environment.BASE_URL\r\n  //private API_URL= environment.API_URL;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private router: Router,\r\n    private localStorage: LocalStorageService\r\n  ){}\r\n\r\n\r\n\r\n  getClientsBySite(site_id: number):Observable<any>{\r\n    return this.httpClient.get(`${this.BASE_URL}/clients/site/${site_id}`, {... this.localStorage.getAuthorization()});\r\n\r\n  }\r\n\r\n  getClientById(client_id: number):Observable<any>{\r\n    return this.httpClient.get(`${this.BASE_URL}/clients/${client_id}`, {... this.localStorage.getAuthorization()});\r\n\r\n  }\r\n\r\n  getClientInvoice(client_id: number):Observable<any>{\r\n    return this.httpClient.get(`${this.BASE_URL}/clients/${client_id}/invoice`, {... this.localStorage.getAuthorization()});\r\n\r\n  }\r\n  // getAccountByI(id: number):Observable<any>{\r\n  //   return this.httpClient.get(`${this.BASE_URL}/clients/account/${site_id}`, {... this.localStorage.getAuthorization()});\r\n  //\r\n  // }\r\n\r\n  addClients(client:Client):Observable<any>{\r\n    return this.httpClient.post(`${this.BASE_URL}/clients`, client,{... this.localStorage.getAuthorization()});\r\n\r\n  }\r\n  updateClient(client:Client):Observable<any>{\r\n    return this.httpClient.put(`${this.BASE_URL}/clients/`+client.id, client,{... this.localStorage.getAuthorization()});\r\n\r\n  }\r\n\r\n\r\n\r\n}\r\n","\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Router } from '@angular/router';\r\nimport { environment } from 'src/app/environments/environment';\r\nimport { LocalStorageService } from '../local-storage/local-storage.service';\r\nimport { Observable } from 'rxjs';\r\nimport { Site } from '../../models/sites';\r\nimport { Sale } from '../../models/sales';\r\n\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class SalesService {\r\n  BASE_URL = environment.BASE_URL\r\n  //private API_URL= environment.API_URL;\r\n\r\n  constructor(\r\n    private httpClient: HttpClient,\r\n    private router: Router,\r\n    private localStorage: LocalStorageService\r\n  ){}\r\n\r\n  getSalesById(siteID: number){\r\n    return this.httpClient.get(`${this.BASE_URL}/sites/${siteID}/sales`, {... this.localStorage.getAuthorization()});\r\n  }\r\n\r\n  getSaleByInvoice(invoiceID: number){\r\n    return this.httpClient.get(`${this.BASE_URL}/invoices/${invoiceID}/sale`, {... this.localStorage.getAuthorization()});\r\n  }\r\n\r\n  addSales(sale:Sale):Observable<any>{\r\n    return this.httpClient.post(`${this.BASE_URL}/sales`, sale,{... this.localStorage.getAuthorization()});\r\n\r\n  }\r\n  updateSale(sale:Sale):Observable<any>{\r\n    return this.httpClient.put(`${this.BASE_URL}/sales/`+sale.id, sale,{... this.localStorage.getAuthorization()});\r\n\r\n  }\r\n  deleteSale(sale:Sale):Observable<any>{\r\n    return this.httpClient.delete(`${this.BASE_URL}/sales/`+sale.id, {... this.localStorage.getAuthorization()});\r\n\r\n  }\r\n\r\n\r\n}\r\n"],"names":["DestroyRef","inject","ReplaySubject","filter","map","MatTableDataSource","MatTableModule","MatPaginator","MatPaginatorModule","MatSort","MatSortModule","MatDialogModule","SelectionModel","fadeInUp400ms","stagger40ms","FormControl","FormsModule","ReactiveFormsModule","UntypedFormControl","MatCheckboxModule","MatMenuModule","MatIconModule","MatTooltipModule","MatButtonModule","NgClass","NgFor","NgIf","VexPageLayoutContentDirective","MatButtonToggleModule","VexPageLayoutHeaderDirective","VexPageLayoutComponent","takeUntilDestroyed","MatInputModule","MatSnackBarModule","Invoices","LocalStorageService","User","Roles","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","column_r13","label","ɵɵproperty","cssClasses","row_r18","property","ɵɵelementContainerStart","ɵɵtemplate","CurrentSaleComponent_ng_container_15_ng_container_1_th_1_Template","CurrentSaleComponent_ng_container_15_ng_container_1_td_2_Template","ɵɵelementContainerEnd","CurrentSaleComponent_ng_container_15_ng_container_1_Template","type","ɵɵelement","ɵɵlistener","CurrentSaleComponent_td_18_Template_a_click_2_listener","$event","stopPropagation","CurrentSaleComponent_td_18_Template_a_click_4_listener","CurrentSaleComponent_td_18_Template_a_click_6_listener","CurrentSaleComponent_td_21_Template_div_click_1_listener","CurrentSaleComponent_td_24_Template_button_click_1_listener","ɵɵpureFunction1","_c0","row_r27","_r11","undefined","CurrentSaleComponent_button_30_Template_button_click_0_listener","restoredCtx","ɵɵrestoreView","_r32","column_r30","$implicit","ctx_r31","ɵɵnextContext","ɵɵresetView","toggleColumnVisibility","CurrentSaleComponent_button_30_Template_mat_checkbox_click_1_listener","CurrentSaleComponent_button_30_Template_mat_checkbox_ngModelChange_1_listener","visible","CurrentSaleComponent_ng_template_33_button_0_Template_button_click_0_listener","_r40","invoice_r35","invoice","ctx_r38","updateInvoice","CurrentSaleComponent_ng_template_33_button_1_Template_button_click_0_listener","_r43","ctx_r41","validateInvoice","CurrentSaleComponent_ng_template_33_button_0_Template","CurrentSaleComponent_ng_template_33_button_1_Template","ctx_r12","userRoles","role_name","CurrentSaleComponent","constructor","router","dialog","invoiceService","snackbar","localStorage","pdfServiceService","salesService","clientsService","layoutCtrl","subject$","data$","asObservable","columns","pageSize","pageSizeOptions","selection","searchCtrl","destroyRef","step","siteId","invoices","dataRole","totalVente","visibleColumns","column","getInvoicByStep","pipe","res","data","updateColumnVisibility","ngOnInit","JSON","parse","getData","history","state","localStorageService","getInstance","userData","userInfo","id","first_name","last_name","site_id","subscribe","next","reduce","total","total_amount","dataSource","Boolean","valueChanges","value","onFilterChange","ngAfterViewInit","paginator","sort","deleteSale","sale","console","log","navigate","invoiceId","result","splice","findIndex","existingInvoice","deselect","getSaleByInvoice","saveData","client_id","getClient","clientId","getClientById","saveClient","trim","toLowerCase","event","stopImmediatePropagation","isAllSelected","numSelected","selected","length","numRows","masterToggle","clear","forEach","row","select","trackByProperty","index","onLabelChange","change","s","_","ɵɵdirectiveInject","i1","Router","i2","MatDialog","i3","InvoiceService","i4","MatSnackBar","i5","i6","PdfServiceService","i7","SalesService","i8","ClientsService","_2","selectors","viewQuery","CurrentSaleComponent_Query","rf","ctx","CurrentSaleComponent_ng_container_15_Template","CurrentSaleComponent_th_17_Template","CurrentSaleComponent_td_18_Template","CurrentSaleComponent_th_20_Template","CurrentSaleComponent_td_21_Template","CurrentSaleComponent_th_23_Template","CurrentSaleComponent_td_24_Template","CurrentSaleComponent_tr_25_Template","CurrentSaleComponent_tr_26_Template","CurrentSaleComponent_button_30_Template","CurrentSaleComponent_ng_template_33_Template","ɵɵclassProp","_r9","i9","DefaultValueAccessor","NgControlStatus","FormControlDirective","i10","MatIconAnchor","MatIconButton","i11","MatTooltip","i12","MatIcon","i13","MatMenu","MatMenuItem","MatMenuContent","MatMenuTrigger","i14","MatTable","MatHeaderCellDef","MatHeaderRowDef","MatColumnDef","MatCellDef","MatRowDef","MatHeaderCell","MatCell","MatHeaderRow","MatRow","i15","MatSortHeader","i16","MatCheckbox","i17","NgModel","i18","MatInput","i19","MatFormField","MatPrefix","styles","animation","details","today","Date","now","user_id","sales","i","element","quantity_sold","product","name","pU","invoice_date","toISOString","substring","user","num_invoice","client","displayed_Date","formatDate","date","day","getDate","toString","padStart","monthNames","month","getMonth","year","getFullYear","environment","httpClient","BASE_URL","getClientsBySite","get","getAuthorization","getClientInvoice","addClients","post","updateClient","put","ɵɵinject","HttpClient","factory","ɵfac","providedIn","getSalesById","siteID","invoiceID","addSales","updateSale","delete"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}